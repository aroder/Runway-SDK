<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Covers the basics of defining metadata in Runway via XML">
<meta name="keywords" content="metadata,  terraframe, runway, metadata">
<title>Defining metadata through XML | Runway SDK documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-black.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Runway SDK Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Terraframe Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/terraframe/Runway-SDK" target="_blank">RunwaySDK on Github</a></li>
                        
                        
                        
                        <li><a href="https://github.com/terraframe/Runway-SDK-GIS" target="_blank">RunwaySDK-GIS on Github</a></li>
                        
                        
                        
                        <li><a href="http://terraframe.com/" target="_blank">TerraFrame</a></li>
                        
                        
                        
                        <li><a href="https://github.com/terraframe/geoprism" target="_blank">GeoPrism on Github</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:info@terraframe.com?subject=Runway SDK documentation feedback feedback&body=I have some feedback about the Defining metadata through XML page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Defining metadata through XML">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Runway SDK latest</li>
    
    
    
        
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="mydoc_about.html">About the team behind Runway SDK</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Working with Metadata</a>
        <ul>
            
            
            
            <li><a href="mydoc_metadata_getting_started.html">Introduction</a></li>
            
            
            
            
            
            
            <li class="active"><a href="mydoc_metadata_authoring.html">Defining metadata through XML</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Types of metadata</a>
                <ul>
                    
                    
                    
                    <li><a href="mydoc_mdbusiness.html">MdBusiness</a></li>
                    
                    
                    
                    
                    
                    <li><a href="mydoc_mdrelationship.html">MdRelationship</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
            
            
            <li><a href="mydoc_metadata_patching.html">Patching</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Aspect Oriented Programming</a>
        <ul>
            
            
            
            <li><a href="mydoc_aspects_introduction.html">Introduction</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Permissions (RBAC)</a>
        <ul>
            
            
            
            <li><a href="mydoc_permissions_introduction.html">Introduction</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Defining metadata through XML</h1>
</div>



<div class="post-content">

   
    <div class="summary">Covers the basics of defining metadata in Runway via XML</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/terraframe/runway-sdk/tree/gh-pages/pages/mydoc/mydoc_metadata_authoring.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

  <h2 id="overview">Overview</h2>

<p>The most common way to create metadata is through Runway’s custom XML schema.  This XML allows for developers to intuitively manipulate metadata, which includes creating new metadata definitions, updating and deleting existing definitions, and defining permissions for metadata definitions.  Along these lines the XML is broken up into five major sections: Referencing existing definitions, deleting definitions, creating definitions, updating definitions, and defining permissions.</p>

<p>The XML syntax for creating a new definition and updating an existing definition are (almost) identical.  The <code class="highlighter-rouge">create</code> tag is used to create a new definition while the <code class="highlighter-rouge">update</code> tag is used to update existing definitions.  There are a few key differences between creates and updates, however we will go into this later.</p>

<h2 id="creating-an-mdbusiness">Creating an MdBusiness</h2>

<p>The following XML defines a new type of User called a GeoprismUser. Because users in Runway are defined via an MdBusiness, they can be extended to create custom user types that more accurately reflect the needs of the application.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;version xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;doIt&gt;
    &lt;create&gt;
      &lt;mdBusiness name="net.geoprism.GeoprismUser" label="User" extends="com.runwaysdk.system.Users"&gt;
        &lt;attributes&gt;
          &lt;char name="firstName" label="First name" size="255" required="true" /&gt;
          &lt;char name="lastName" label="Last name" size="255" required="true" /&gt;
          &lt;char name="phoneNumber" label="Phone number" size="255" required="false" /&gt;
          &lt;char name="email" label="Email" size="255" required="true" /&gt;
        &lt;/attributes&gt;
      &lt;/mdBusiness&gt;
    &lt;/create&gt;
  &lt;/doIt&gt;
  &lt;undoIt&gt;
    &lt;delete&gt;
      &lt;object key="net.geoprism.GeoprismUser" type="com.runwaysdk.system.metadata.MdBusiness" /&gt;
    &lt;/delete&gt;
  &lt;/undoIt&gt;
&lt;/version&gt;
</code></pre>
</div>

<p>Lets break down this XML line by line.</p>

<h2 id="the-version-tag">The version tag</h2>

<p>All metadata files start with this line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;version xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
</code></pre>
</div>

<p>The <code class="highlighter-rouge">version</code> tag lets us know that we are defining verisoned metadata and is associated with the particular Runway importer we will be using (<a href="https://github.com/terraframe/Runway-SDK/blob/master/runwaysdk-server/src/main/java/com/runwaysdk/dataaccess/io/Versioning.java">com.runwaysdk.dataaccess.io.Versioning</a>).</p>

<h2 id="classpathNotation">The classpath notation</h2>

<p>At the top of every schema file you will see this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd"
</code></pre>
</div>

<p>The <code class="highlighter-rouge">xsi:noNamespaceSchemaLocation</code> is a standard way in XML to define an XSD schema definition, which we set to our <code class="highlighter-rouge">version.xsd</code> file. However, <code class="highlighter-rouge">classpath:</code> is non-standard, and is a concept we created. This allows us to read the XSD schema from the classpath. Our XSD schema file is included within the runway server jar. You can view this file on the web here:</p>

<p><a href="https://raw.githubusercontent.com/terraframe/Runway-SDK/master/runwaysdk-server/src/main/resources/com/runwaysdk/resources/xsd/version.xsd">https://raw.githubusercontent.com/terraframe/Runway-SDK/master/runwaysdk-server/src/main/resources/com/runwaysdk/resources/xsd/version.xsd</a></p>

<p>This custom classpath modifier has many advantages when used at runtime, however IDE’s like Eclipse cannot read the XSD file to provide auto-complete. You can place this URL into the <code class="highlighter-rouge">xsi:noNamespaceSchemaLocation</code> attribute like so:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/terraframe/Runway-SDK/master/runwaysdk-server/src/main/resources/com/runwaysdk/resources/xsd/version.xsd"
</code></pre>
</div>

<p>As a workaround for development, but when the file is committed you should use the classpath notation.</p>

<h2 id="doit-and-undoit">doIt and undoIt</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;version xsi:noNamespaceSchemaLocation="classpath:com/runwaysdk/resources/xsd/version.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;doIt&gt;
    &lt;create&gt;
     ...
    &lt;/create&gt;
  &lt;/doIt&gt;
  &lt;undoIt&gt;
    &lt;delete&gt;
     ...
    &lt;/delete&gt;
  &lt;/undoIt&gt;
</code></pre>
</div>

<p>An XML schema can be either imported or unimported. The <code class="highlighter-rouge">doIt</code> tag defines what happens when the schema is imported. The <code class="highlighter-rouge">undoIt</code> tag defines what happens when the schema is unimported. Thus, the <code class="highlighter-rouge">doIt</code> section defines the domain for whatever feature you are implementing, and the <code class="highlighter-rouge">undoIt</code> section removes the feature. This is useful in a development context because your feature is in a state of flux. If the metadata already exists in the database from the last time you imported this schema, you must first delete all the metadata before you can import the schema again to redefine your model.</p>

<p>As you progress in experience writing schema files, you may be tempted to ignore the <code class="highlighter-rouge">undoIt</code> section and simply comment out metadata that already exists, allowing you to skip unimporting the schema and running the import again (with only that which has changed). Resist the urge to do this! When the time comes to finally commit your metadata file, you will have never run the schema file in its entirety, which means you are committing untested code. In addition, you will start to lose track of the actual state of your database. All of these things will cost you time. Get in the good habit now of writing your <code class="highlighter-rouge">undoIt</code> section along-side your <code class="highlighter-rouge">doIt</code> code.</p>

<h2 id="file-conventions">File conventions</h2>

<p>Metadata is typically stored at the path ‘src/main/domain’ in the server project. In this directory you will see a list of files with an unusual naming convention. As an example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>(0001466352372715)CategoryIconImage.xml
</code></pre>
</div>

<p>The number enclosed within the parenthesis is a timestamp, generated by Runway. We like to put it first because when you view the files alphabetically (as is default in eclipse or a filesystem navigator) the files are ordered by their creation date. The second part, ‘CategoryIconImage’ is a name that you the developer create to describe the feature or grouping of features that this metadata schema contains. When the schemas are processed by Runway, the timestamp must be isolated from the filename. Runway uses a regex expression to do this. This regex expression can be found in TimestampFile.java, and although your timestamp must be numbers, your description can be alpanumeric characters as well as dashes, underscores, periods and whitespaces.</p>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 TerraFrame. All rights reserved. <br />
<span>Page last updated:</span> December 21, 2017<br/> Site last generated: Jan 3, 2018 <br />
<p>
<!--
<img src="images/company_logo.png" alt="Company logo"/>
-->
</p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>